"use strict";const serverUrl="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",noImgUrl="https://via.placeholder.com/200x200/3d1b5b/f3f3f3/?text=cocktail",favoritesList=document.querySelector(".js-listFav"),listSearch=document.querySelector(".js-listElement"),inputSearch=document.querySelector(".js-inputSearch"),btnSearch=document.querySelector(".js-btnSearch"),btnReset=document.querySelector(".js-btnReset");let favorites=[],cocktailData=[];function fetchInicio(){fetch(serverUrl).then(e=>e.json()).then(e=>{if(""===e.drinks.strDrinkThumb)cocktailData=e.drinks.map(e=>({name:e.strDrink,img:noImgUrl,id:e.idDrink})),renderAll(cocktailData);else{cocktailData=e.drinks.map(e=>({name:e.strDrink,img:e.strDrinkThumb,id:e.idDrink})),renderAll(cocktailData);const t=JSON.parse(localStorage.getItem("listFavorites"));t.length>0&&(favorites=t,renderAll(favorites))}})}function renderAll(e){e===favorites?favoritesList.innerHTML="":listSearch.innerHTML="";for(const t of e){const i=document.createElement("li"),r=document.createElement("h3"),n=document.createElement("img"),a=document.createElement("div");i.appendChild(r),i.appendChild(n),i.appendChild(a),n.setAttribute("src",t.img),n.setAttribute("class","img"),r.setAttribute("class","card_title"),i.setAttribute("id",t.id);const c=document.createTextNode(t.name);if(r.appendChild(c),e===favorites){favoritesList.appendChild(i),i.setAttribute("class","card noFavorites js-listFav"),a.setAttribute("class","remove js-remove"),a.setAttribute("id",t.id);const e=document.createTextNode("X");a.appendChild(e)}else listSearch.appendChild(i),i.setAttribute("class","card noFavorites js-liElement")}e===favorites&&localStorage.setItem("listFavorites",JSON.stringify(favorites)),addEventClickList(cocktailData),addEventClickFavorites(),isItFavorite()}function handleclick(e){e.preventDefault();let t=inputSearch.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(e=>e.json()).then(e=>{""===e.drinks.strDrinkThumb?(cocktailData=e.drinks.map(e=>({name:e.strDrink,img:noImgUrl,id:e.idDrink})),renderAll(cocktailData)):(cocktailData=e.drinks.map(e=>({name:e.strDrink,img:e.strDrinkThumb,id:e.idDrink})),renderAll(cocktailData))})}function handleclickReset(e){e.preventDefault(),inputSearch.value="",fetchInicio()}function addEventClickList(){const e=document.querySelectorAll(".js-liElement");for(const t of e)t.addEventListener("click",handleClickFavorites)}function handleClickFavorites(e){const t=e.currentTarget.id;e.currentTarget.classList.toggle("favorites"),e.currentTarget.classList.toggle("noFavorites");const i=cocktailData.find(e=>e.id===t),r=favorites.findIndex(e=>e.id===t);-1===r?favorites.push(i):favorites.splice(r,1),renderAll(favorites)}function isItFavorite(){const e=document.querySelectorAll(".js-liElement");for(const t of e){favorites.find(e=>e.id===t.id)&&(t.classList.add("favorites"),t.classList.remove("noFavorites"))}}function addEventClickFavorites(){const e=document.querySelectorAll(".js-remove");for(const t of e)t.addEventListener("click",handleClickRemove)}function handleClickRemove(e){const t=e.currentTarget.id,i=favorites.findIndex(e=>e.id===t);favorites.splice(i,1),renderAll(cocktailData),renderAll(favorites)}fetchInicio(),btnSearch.addEventListener("click",handleclick),btnReset.addEventListener("click",handleclickReset);const btnResetFav=document.querySelector(".js-btnResetFav");function handleClickResetFav(){favoritesList.innerHTML="",localStorage.removeItem("listFavorites"),renderAll(cocktailData)}btnResetFav.addEventListener("click",handleClickResetFav);