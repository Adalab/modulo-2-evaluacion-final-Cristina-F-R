"use strict";const serverUrl="https://www.thecocktaildb.com/api/json/v1/1/search.php?s=margarita",noImgUrl="https://via.placeholder.com/200x200/3d1b5b/f3f3f3/?text=cocktail",favoritesList=document.querySelector(".js-listFav"),listSearch=document.querySelector(".js-listElement"),inputSearch=document.querySelector(".js-inputSearch"),btnSearch=document.querySelector(".js-btnSearch"),btnResetFav=document.querySelector(".js-resetFav"),btnReset=document.querySelector(".js-btnReset");let favorites=[],cocktailData=[];function fetchInicio(){fetch(serverUrl).then(e=>e.json()).then(e=>{if(""===e.drinks.strDrinkThumb)cocktailData=e.drinks.map(e=>({name:e.strDrink,img:noImgUrl,id:e.idDrink})),render(cocktailData);else{cocktailData=e.drinks.map(e=>({name:e.strDrink,img:e.strDrinkThumb,id:e.idDrink})),render(cocktailData);const t=JSON.parse(localStorage.getItem("listFavorites"));t.length>0&&(favorites=t,renderFavorites(favorites))}})}function render(){listSearch.innerHTML="";for(const e of cocktailData){const t=document.createElement("li"),i=document.createElement("h3"),n=document.createElement("img");listSearch.appendChild(t),t.appendChild(i),t.appendChild(n),n.setAttribute("src",e.img),n.setAttribute("class","img"),t.setAttribute("class","sectionList__title--listElement noFavorites js-liElement"),i.setAttribute("class","sectionList__title--titleElement"),t.setAttribute("id",e.id);const r=document.createTextNode(e.name);i.appendChild(r)}addEventClickList(cocktailData),isItFavorite()}function handleclick(e){e.preventDefault();let t=inputSearch.value;fetch("https://www.thecocktaildb.com/api/json/v1/1/search.php?s="+t).then(e=>e.json()).then(e=>{""===e.drinks.strDrinkThumb?(cocktailData=e.drinks.map(e=>({name:e.strDrink,img:noImgUrl,id:e.idDrink})),render(cocktailData)):(cocktailData=e.drinks.map(e=>({name:e.strDrink,img:e.strDrinkThumb,id:e.idDrink})),render(cocktailData))})}function handleclickReset(e){e.preventDefault(),inputSearch.value="",fetchInicio()}function addEventClickList(){const e=document.querySelectorAll(".js-liElement");for(const t of e)t.addEventListener("click",handleClickFavorites)}function handleClickFavorites(e){const t=e.currentTarget.id;e.currentTarget.classList.toggle("favorites");const i=cocktailData.find(e=>e.id===t);console.log(i);const n=favorites.findIndex(e=>e.id===t);console.log(n),-1===n?favorites.push(i):favorites.splice(n,1),renderFavorites()}function renderFavorites(){favoritesList.innerHTML="";for(const e of favorites){const t=document.createElement("li"),i=document.createElement("h3"),n=document.createElement("img"),r=document.createElement("div");favoritesList.appendChild(t),t.appendChild(i),t.appendChild(n),t.appendChild(r),n.setAttribute("src",e.img),n.setAttribute("class","img"),t.setAttribute("class","sectionFav__title--listElement js-listFav"),i.setAttribute("class","sectionList__title--titleElement"),t.setAttribute("id",e.id),r.setAttribute("class","js-remove"),r.setAttribute("id",e.id);const s=document.createTextNode(e.name),c=document.createTextNode("X");r.appendChild(c),i.appendChild(s)}localStorage.setItem("listFavorites",JSON.stringify(favorites)),addEventClickFavorites(),isItFavorite()}function isItFavorite(){const e=document.querySelectorAll(".js-liElement");for(const t of e){favorites.find(e=>e.id===t.id)&&(t.classList.add("favorites"),t.classList.remove("noFavorites"))}}function addEventClickFavorites(){const e=document.querySelectorAll(".js-remove");for(const t of e)t.addEventListener("click",handleClickRemove)}function handleClickRemove(e){const t=e.currentTarget.id,i=favorites.findIndex(e=>e.id===t);favorites.splice(i,1),renderFavorites(),render()}function handleClickResetFav(){console.log("reset disparada"),favoritesList.innerHTML="",localStorage.removeItem("listFavorites"),render()}fetchInicio(),btnSearch.addEventListener("click",handleclick),btnReset.addEventListener("click",handleclickReset),btnResetFav.addEventListener("click",handleClickResetFav);